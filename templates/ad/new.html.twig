{% extends 'base.html.twig' %}

{% form_theme form 'ad/_collection.html.twig' %}

{% block title %}Creation d'une annonce{% endblock %}

{% block body %}
    <div class="container">
        <h1>Créer une nouvelle annonce</h1>
        {{ form_start(form) }}
        {{ form_widget(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        $('#add-image').click(function(){
            const index = +$('#widgets-counter').val();

            const tmpl = $('#annonce_images').data('prototype').replace(/__name__/g, index);

            $('#annonce_images').append(tmpl);

            $("#widgets-counter").val(index + 1);

            handleDeleteButtons();
        })

        function handleDeleteButtons(){
            // Au click sur le bouton avec l'attribut data-action="delete"
            $('button[data-action="delete"]').click(function(){

                // On récupèère la cible contenu dans l'attribut data-target
                const target = this.dataset.target;

                // On supprime la cible
                $(target).remove();

            })
        }
        handleDeleteButtons();   
    </script>
{% endblock %}

{# {% block form_row %}
    <div class="form-group">
        {{ form_label(form) }}
    </div>
{% endblock %} #}


{# {% block text_widget %}
    <input type="text" name="{{ full_name }}", id="{{ id }}" class="form-control">
{% endblock %} #}
